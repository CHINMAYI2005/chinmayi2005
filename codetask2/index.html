<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI FAQ Chatbot ‚Äì Cosine Similarity (No Backend)</title>
  <style>
    /* ====== GLOBAL / BACKGROUND ====== */
    :root {
      --bg1: #0f2027;  /* dark teal */
      --bg2: #203a43;  /* deep blue */
      --bg3: #2c5364;  /* slate */
      --accent: #7c5cff; /* purple */
      --accent-2: #00e3ae; /* mint */
      --text: #e8eef6;
      --muted: #9fb2c4;
      --chip: #1d2a33;
      --danger: #ff5370;
      --ok: #22c55e;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
      overflow: hidden;
    }

    /* Animated gradient orbs background */
    .bg-orbs {
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: 0;
      filter: blur(50px) saturate(120%);
      opacity: 0.25;
      pointer-events: none;
    }
    .orb {
      position: absolute;
      width: 480px; height: 480px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, var(--accent), transparent 60%),
                  radial-gradient(circle at 70% 70%, var(--accent-2), transparent 60%);
      animation: float 18s ease-in-out infinite;
    }
    .orb.one { top: -100px; left: -120px; animation-delay: 0s; }
    .orb.two { bottom: -120px; right: -100px; animation-delay: 6s; }
    .orb.three { top: 40%; left: 50%; transform: translate(-50%, -50%); animation-delay: 3s; }
    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0) scale(1); }
      50% { transform: translateY(-30px) translateX(10px) scale(1.05); }
    }

    /* ====== LAYOUT ====== */
    .wrap {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: 320px 1fr;
      gap: 18px;
      height: 100vh;
      padding: 22px;
    }

    @media (max-width: 980px) {
      .wrap { grid-template-columns: 1fr; }
      .sidebar { order: 2; height: 40vh; }
      .chat { order: 1; height: 60vh; }
    }

    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
      backdrop-filter: blur(12px);
      border-radius: 18px;
    }

    /* ====== SIDEBAR (FAQ LIST / CONTROLS) ====== */
    .sidebar {
      padding: 16px;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 12px;
    }
    .title {
      display: flex; align-items: center; gap: 10px;
      font-weight: 700; letter-spacing: 0.4px; font-size: 18px;
    }
    .title .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--accent-2); box-shadow: 0 0 12px var(--accent-2); }

    .faq-list {
      overflow: auto; padding-right: 6px;
    }
    .faq-item {
      padding: 10px 12px; border-radius: 12px; background: var(--chip);
      margin-bottom: 10px; cursor: pointer; border: 1px solid rgba(255,255,255,0.06);
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .faq-item:hover { transform: translateY(-2px); background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.18); }
    .faq-item .q { font-weight: 600; font-size: 14px; }
    .faq-item .a { font-size: 13px; color: var(--muted); margin-top: 6px; display: none; }

    .controls { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn, .file-label {
      appearance: none; border: 1px solid rgba(255,255,255,0.18); background: #101820; color: var(--text);
      padding: 10px 12px; border-radius: 12px; cursor: pointer; font-weight: 600; letter-spacing: .2px; font-size: 14px;
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .btn:hover, .file-label:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,.3); border-color: rgba(255,255,255,0.3); }
    .btn.primary{ background: linear-gradient(135deg, var(--accent), #4f46e5); }
    .btn.success{ background: linear-gradient(135deg, var(--ok), #17864c); }
    .btn.danger{ background: linear-gradient(135deg, var(--danger), #b62b49); }

    input[type="file"] { display:none; }

    .badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 9999px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.1); font-size: 12px; color: var(--muted); }
    .badge .pulse { width: 6px; height: 6px; border-radius: 50%; background: var(--accent-2); box-shadow: 0 0 0 0 rgba(0, 227, 174, 0.6); animation: pulse 2s infinite; }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 227, 174, .6);} 70% { box-shadow: 0 0 0 10px rgba(0,227,174,0);} 100% { box-shadow: 0 0 0 0 rgba(0,227,174,0);} }

    /* ====== CHAT PANE ====== */
    .chat {
      display: grid; grid-template-rows: auto 1fr auto; gap: 12px; padding: 12px;
    }
    .chat-header {
      display: flex; align-items: center; justify-content: space-between; padding: 8px 12px;
    }
    .brand { display:flex; align-items:center; gap:12px; }
    .logo { width: 36px; height: 36px; border-radius: 12px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow: 0 8px 24px rgba(0,0,0,.35); }
    .brand h1 { margin: 0; font-size: 18px; letter-spacing: .3px; }

    .chat-body { padding: 10px; overflow: auto; }

    .msg { display: flex; gap: 10px; margin: 10px 0; }
    .msg.user { flex-direction: row-reverse; }
    .avatar { width: 34px; height: 34px; border-radius: 50%; background: #0b1320; display: grid; place-items: center; font-weight: 800; }
    .bubble { max-width: min(680px, 80%); padding: 12px 14px; border-radius: 14px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.06); box-shadow: 0 6px 16px rgba(0,0,0,.25); }
    .msg.user .bubble { background: linear-gradient(135deg, rgba(124,92,255,.25), rgba(0,227,174,.20)); }

    .meta { display: flex; align-items: center; gap: 8px; margin-top: 6px; font-size: 12px; color: var(--muted); }
    .score { padding: 2px 8px; border-radius: 999px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.08); }

    .typing { display: inline-block; }
    .typing span { display: inline-block; width: 6px; height: 6px; margin: 0 1px; background: #cbd5e1; border-radius: 50%; animation: bounce 1.1s infinite; }
    .typing span:nth-child(2) { animation-delay: .12s; }
    .typing span:nth-child(3) { animation-delay: .24s; }
    @keyframes bounce { 0%, 80%, 100% { transform: translateY(0); opacity: .3; } 40% { transform: translateY(-6px); opacity: 1; } }

    .inputbar { display:flex; gap:10px; padding: 10px; }
    .inputbar textarea { flex:1; resize: none; min-height: 48px; max-height: 120px; padding: 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,.16); background: rgba(255,255,255,.07); color: var(--text); }
    .send { min-width: 110px; }

    .tool-row { display:flex; gap:8px; align-items:center; flex-wrap: wrap; padding: 0 10px 10px; }
    .tool { font-size:12px; color: var(--muted); }

    .small { font-size: 12px; color: var(--muted); }
    .hint { font-size: 12px; opacity: 0.9; }

    /* Scrollbar minimal */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-thumb { background: rgba(255,255,255,.12); border-radius: 999px; }
    ::-webkit-scrollbar-track { background: rgba(255,255,255,.04); }
  </style>
</head>
<body>
  <!-- Background orbs -->
  <div class="bg-orbs">
    <div class="orb one"></div>
    <div class="orb two"></div>
    <div class="orb three"></div>
  </div>

  <div class="wrap">
    <!-- Sidebar -->
    <aside class="sidebar glass">
      <div class="title"><span class="dot"></span> FAQ Library
        <span class="badge" title="Preprocessing enabled: lowercase, clean, stopwords, stemming, TF‚ÄëIDF">
          <span class="pulse"></span> NLP: TF‚ÄëIDF + Cosine
        </span>
      </div>

      <div id="faqList" class="faq-list"></div>

      <div class="controls">
        <label class="file-label" for="fileInput">üìÅ Import FAQs (JSON)</label>
        <input id="fileInput" type="file" accept="application/json" />
        <button class="btn primary" id="btnReset">Reset FAQs</button>
        <button class="btn success" id="btnSpeak">üîä Read Answer</button>
        <button class="btn danger" id="btnCopy">üìã Copy Answer</button>
      </div>
      <div class="small hint">Tip: Click a FAQ on the left to paste the question into chat.</div>
    </aside>

    <!-- Chat -->
    <main class="chat glass">
      <div class="chat-header">
        <div class="brand">
          <div class="logo"></div>
          <h1>AI FAQ Chatbot</h1>
        </div>
        <div class="badge"><span class="pulse"></span> Cosine Similarity Matching</div>
      </div>

      <div id="chatBody" class="chat-body"></div>

      <div class="tool-row">
        <div class="tool">Preprocessing: tokenize ‚Ä¢ lowercase ‚Ä¢ punctuation removal ‚Ä¢ stopwords ‚Ä¢ Porter stemming ‚Ä¢ TF‚ÄëIDF</div>
      </div>

      <div class="inputbar">
        <textarea id="userInput" placeholder="Ask a question‚Ä¶ e.g., ‚ÄòHow do I reset my password?‚Äô" rows="2"></textarea>
        <button id="sendBtn" class="btn send primary">Send ‚ñ∏</button>
      </div>
    </main>
  </div>

  <script>
    /****************************
     *  CONFIG: SAMPLE FAQ DATA *
     ****************************/
    const DEFAULT_FAQS = [
      {
        q: "How do I reset my password?",
        a: "Go to Settings ‚Üí Account ‚Üí ‚ÄòReset Password‚Äô. Enter your email, then follow the verification link we send you.",
        tags: ["account", "security", "password"]
      },
      {
        q: "How can I contact customer support?",
        a: "You can reach us via in‚Äëapp chat (Help ‚Üí Chat with us) or email support@example.com. Our team responds within 24 hours.",
        tags: ["contact", "support", "helpdesk"]
      },
      {
        q: "What is your refund policy?",
        a: "We offer a 14‚Äëday refund for unused subscriptions. Go to Billing ‚Üí ‚ÄòRequest Refund‚Äô. Terms apply.",
        tags: ["billing", "payments", "refund"]
      },
      {
        q: "Does the mobile app work offline?",
        a: "Core features like reading saved articles work offline. Sync and search require an internet connection.",
        tags: ["mobile", "offline", "sync"]
      },
      {
        q: "How do I change my plan?",
        a: "Open Billing ‚Üí Plans, choose a tier, and click ‚ÄòSwitch‚Äô. Changes take effect immediately on next cycle.",
        tags: ["billing", "plan", "upgrade"]
      },
      {
        q: "Can I export my data?",
        a: "Yes. Go to Settings ‚Üí Privacy ‚Üí ‚ÄòExport Data‚Äô. You‚Äôll receive a downloadable JSON and CSV via email.",
        tags: ["privacy", "export", "data"]
      }
    ];

    /************************************
     *  NLP: TOKENIZE / CLEAN / STEM    *
     ************************************/
    const STOPWORDS = new Set([
      // Common English stopwords (trimmed list)
      'a','an','and','are','as','at','be','but','by','for','if','in','into','is','it','no','not','of','on','or','such','that','the','their','then','there','these','they','this','to','was','will','with','you','your','i','we','our','from','do','does','how','can','what','when','where','why'
    ]);

    // Simple tokenizer + cleaner (inspired by NLTK style)
    function tokenize(text) {
      return text
        .toLowerCase()
        .replace(/[^\p{L}\p{N}\s]/gu, ' ') // remove punctuation (unicode aware)
        .split(/\s+/)
        .filter(Boolean)
        .filter(w => !STOPWORDS.has(w))
        .map(porterStemmer);
    }

    // ‚îÄ‚îÄ Porter Stemmer (JS) ‚îÄ‚îÄ
    // Lightweight implementation (public domain / adapted). Keeps code self‚Äëcontained.
    function porterStemmer(w) {
      if (w.length < 3) return w;
      const vowel = /[aeiou]/; const consonant = /[^aeiou]/;
      const mgr0 = /^([^aeiou][^aeiouy]*)([aeiouy][^aeiou]*)+$/;
      const meq1 = /^([^aeiou][^aeiouy]*)([aeiouy][^aeiou]*)+([^aeiouy]*)$/;
      const mgr1 = /^([^aeiou][^aeiouy]*)([aeiouy][^aeiou]*)+([^aeiouy]+)([aeiouy].*)$/;
      const cvc = /([^aeiou][aeiou][^aeiouwxy])$/;
      let stem, suffix, firstch, re, re2, re3, re4;
      firstch = w[0];
      if (w.length <= 2) return w;
      /* Step 1a */
      re = /(ss|i)es$/; re2 = /([^s])s$/;
      if (re.test(w)) w = w.replace(re, "$1");
      else if (re2.test(w)) w = w.replace(re2, "$1");
      /* 1b */
      re = /(eed)$/; re2 = /(ed|ing)$/;
      if (re.test(w)) { re = /(eed)$/; if (mgr0.test(w.replace(re, ''))) w = w.replace(re, 'ee'); }
      else if (re2.test(w)) {
        stem = w.replace(re2, '');
        if (vowel.test(stem)) { w = stem; re = /(at|bl|iz)$/; re2 = /([^aeiouylsz])\1$/; re3 = cvc; if (re.test(w)) w += 'e'; else if (re2.test(w)) w = w.replace(/.$/, ''); else if (re3.test(w)) w += 'e'; }
      }
      /* 1c */
      re = /y$/; if (re.test(w)) { stem = w.replace(re, ''); if (vowel.test(stem)) w = stem + 'i'; }
      /* 2 */
      re = /(ational|tional|enci|anci|izer|abli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti)$/;
      if (re.test(w)) { suffix = RegExp.$1; re = new RegExp(suffix + '$'); if (mgr0.test(w.replace(re, ''))) {
        const map = { 'ational':'ate','tional':'tion','enci':'ence','anci':'ance','izer':'ize','abli':'able','alli':'al','entli':'ent','eli':'e','ousli':'ous','ization':'ize','ation':'ate','ator':'ate','alism':'al','iveness':'ive','fulness':'ful','ousness':'ous','aliti':'al','iviti':'ive','biliti':'ble' };
        w = w.replace(re, map[suffix] || '');
      }}
      /* 3 */
      re = /(icate|ative|alize|iciti|ical|ful|ness)$/; if (re.test(w)) { suffix = RegExp.$1; re = new RegExp(suffix + '$'); if (mgr0.test(w.replace(re, ''))) { const map={'icate':'ic','ative':'','alize':'al','iciti':'ic','ical':'ic','ful':'','ness':''}; w = w.replace(re, map[suffix]); }}
      /* 4 */
      re = /(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ion|ou|ism|ate|iti|ous|ive|ize)$/;
      if (re.test(w)) { suffix = RegExp.$1; re = new RegExp(suffix + '$'); stem = w.replace(re, ''); if (mgr1.test(stem)) w = stem; }
      /* 5a */
      re = /e$/; if (re.test(w)) { stem = w.replace(re, ''); if (mgr1.test(stem) || (meq1.test(stem) && !cvc.test(stem))) w = stem; }
      /* 5b */
      re = /ll$/; if (re.test(w) && mgr1.test(w)) w = w.replace(/.$/, '');
      return w;
    }

    /************************************
     *  TF‚ÄëIDF + COSINE SIMILARITY      *
     ************************************/
    function buildTfIdf(docs) {
      // docs: array of strings
      const tokenized = docs.map(tokenize);
      const vocab = new Map(); // term -> index
      const df = new Map(); // term -> doc freq

      tokenized.forEach(tokens => {
        const seen = new Set();
        tokens.forEach(t => {
          if (!vocab.has(t)) vocab.set(t, vocab.size);
          if (!seen.has(t)) { df.set(t, (df.get(t) || 0) + 1); seen.add(t); }
        });
      });

      const N = docs.length;
      const idf = new Float32Array(vocab.size);
      [...vocab.entries()].forEach(([term, idx]) => {
        const dfi = df.get(term) || 1;
        idf[idx] = Math.log( (N + 1) / (dfi + 1) ) + 1; // smooth idf
      });

      const vectors = tokenized.map(tokens => {
        const tf = new Map();
        tokens.forEach(t => tf.set(t, (tf.get(t) || 0) + 1));
        const vec = new Float32Array(vocab.size);
        tf.forEach((count, term) => {
          const idx = vocab.get(term);
          vec[idx] = (count / tokens.length) * idf[idx];
        });
        // L2 normalize
        const norm = Math.hypot(...vec);
        if (norm > 0) for (let i=0; i<vec.length; i++) vec[i] /= norm;
        return vec;
      });

      return { vocab, idf, vectors };
    }

    function vectorize(query, vocab, idf) {
      const tokens = tokenize(query);
      const tf = new Map(); tokens.forEach(t => tf.set(t, (tf.get(t)||0)+1));
      const vec = new Float32Array(vocab.size);
      tokens.forEach(t => { const idx = vocab.get(t); if (idx !== undefined) vec[idx] = (tf.get(t)/tokens.length) * idf[idx]; });
      const norm = Math.hypot(...vec);
      if (norm > 0) for (let i=0; i<vec.length; i++) vec[i] /= norm;
      return vec;
    }

    function cosine(a, b) {
      let s = 0; for (let i=0; i<a.length; i++) s += a[i]*b[i];
      return s; // vectors are normalized
    }

    /************************************
     *  APP STATE + INDEXING            *
     ************************************/
    let FAQS = [...DEFAULT_FAQS];
    let INDEX = null; // { vocab, idf, vectors }

    function buildIndex() {
      // Use both question and answer text for better recall
      const docs = FAQS.map(f => `${f.q} ${f.a} ${(f.tags||[]).join(' ')}`);
      INDEX = buildTfIdf(docs);
      renderFaqList();
    }

    function renderFaqList() {
      const list = document.getElementById('faqList');
      list.innerHTML = '';
      FAQS.forEach((f, i) => {
        const item = document.createElement('div');
        item.className = 'faq-item';
        item.innerHTML = `<div class="q">Q${i+1}. ${escapeHtml(f.q)}</div><div class="a">${escapeHtml(f.a)}</div>`;
        item.addEventListener('click', () => {
          const ta = document.getElementById('userInput');
          ta.value = f.q;
          ta.focus();
        });
        list.appendChild(item);
      });
    }

    function escapeHtml(str){return str.replace(/[&<>"]+/g, s=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;"}[s]));}

    /************************************
     *  MATCHING + CHAT FLOW            *
     ************************************/
    const chatBody = document.getElementById('chatBody');

    function addMessage(text, who='bot', meta='') {
      const row = document.createElement('div');
      row.className = `msg ${who==='user'?'user':''}`;
      const avatar = document.createElement('div');
      avatar.className = 'avatar';
      avatar.textContent = who==='user' ? 'U' : 'AI';
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      bubble.innerHTML = `<div>${escapeHtml(text)}</div>${meta?`<div class="meta">${meta}</div>`:''}`;
      row.appendChild(avatar); row.appendChild(bubble);
      chatBody.appendChild(row);
      chatBody.scrollTop = chatBody.scrollHeight;
      return bubble;
    }

    function addTyping() {
      const row = document.createElement('div');
      row.className = 'msg';
      row.id = 'typingRow';
      row.innerHTML = `<div class="avatar">AI</div><div class="bubble"><div class="typing"><span></span><span></span><span></span></div></div>`;
      chatBody.appendChild(row);
      chatBody.scrollTop = chatBody.scrollHeight;
    }
    function removeTyping() {
      const t = document.getElementById('typingRow'); if (t) t.remove();
    }

    function bestMatch(query) {
      if (!INDEX) buildIndex();
      const qVec = vectorize(query, INDEX.vocab, INDEX.idf);
      let best = { idx: -1, score: -1 };
      for (let i=0; i<INDEX.vectors.length; i++) {
        const s = cosine(qVec, INDEX.vectors[i]);
        if (s > best.score) best = { idx: i, score: s };
      }
      // Also compute top 3 for transparency
      const scores = INDEX.vectors.map((v, i) => ({ i, s: cosine(qVec, v) }));
      scores.sort((a,b)=>b.s-a.s);
      return { best, top3: scores.slice(0,3) };
    }

    async function handleUserSend() {
      const input = document.getElementById('userInput');
      const text = (input.value || '').trim();
      if (!text) return;
      input.value = '';
      addMessage(text, 'user');
      addTyping();

      // Simulate processing latency
      await new Promise(r => setTimeout(r, 400));

      const { best, top3 } = bestMatch(text);
      removeTyping();

      if (best.idx === -1 || best.score < 0.12) { // threshold for low confidence
        addMessage("I'm not fully sure about that. Try rephrasing or check our FAQ list on the left.");
        return;
      }

      const faq = FAQS[best.idx];
      const meta = `<span class="score" title="Cosine similarity">score: ${best.score.toFixed(3)}</span>` +
                   (top3[1] ? `<span class="score">next: ${FAQS[top3[1].i].q.slice(0,28)}‚Ä¶ (${top3[1].s.toFixed(2)})</span>` : '');
      const bubble = addMessage(faq.a, 'bot', meta);
      // Save last answer for sidebar actions
      lastAnswer = faq.a;
    }

    // Send events
    document.getElementById('sendBtn').addEventListener('click', handleUserSend);
    document.getElementById('userInput').addEventListener('keydown', (e)=>{
      if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') { handleUserSend(); }
      if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); handleUserSend(); }
    });

    /************************************
     *  IMPORT/EXPORT + UTIL BUTTONS    *
     ************************************/
    let lastAnswer = '';

    // Import FAQs from JSON file: [{q:"", a:"", tags:[...]}, ...]
    document.getElementById('fileInput').addEventListener('change', async (e) => {
      const file = e.target.files[0];
      if (!file) return;
      try {
        const text = await file.text();
        const data = JSON.parse(text);
        if (!Array.isArray(data)) throw new Error('JSON must be an array of {q,a,tags}');
        FAQS = data.map(x => ({ q: String(x.q||''), a: String(x.a||''), tags: Array.isArray(x.tags)?x.tags:[] }));
        buildIndex();
        addMessage(`Loaded ${FAQS.length} FAQs from file.`, 'bot');
      } catch(err){
        addMessage('Failed to import JSON: ' + err.message, 'bot');
      }
      e.target.value = '';
    });

    // Reset to defaults
    document.getElementById('btnReset').addEventListener('click', () => {
      FAQS = [...DEFAULT_FAQS];
      buildIndex();
      addMessage('FAQ library reset to defaults.','bot');
    });

    // Speak last answer
    document.getElementById('btnSpeak').addEventListener('click', () => {
      const t = lastAnswer || 'No answer available yet.';
      const utter = new SpeechSynthesisUtterance(t);
      utter.rate = 1.0; utter.pitch = 1.0; utter.lang = 'en-US';
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utter);
    });

    // Copy last answer
    document.getElementById('btnCopy').addEventListener('click', async () => {
      try { await navigator.clipboard.writeText(lastAnswer || ''); addMessage('Answer copied to clipboard ‚úÖ','bot'); }
      catch { addMessage('Copy failed.','bot'); }
    });

    // Build initial index and render
    buildIndex();

    /************************************
     *  OPTIONAL: DEMO WELCOME MESSAGES *
     ************************************/
    addMessage('Hi! I\'m your FAQ assistant. Ask me anything about account, billing, or app features.');
    addMessage('Try: "How do I reset my password?" or import your own FAQ JSON from the sidebar.');
  </script>
</body>
</html>
